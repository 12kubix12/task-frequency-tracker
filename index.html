<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Frequency Tracker</title>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .icon { width: 1rem; height: 1rem; display: inline-block; }
        .icon-lg { width: 2rem; height: 2rem; display: inline-block; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        // Simple icon components (no external dependency)
        const Calendar = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
        );
        
        const Plus = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
            </svg>
        );
        
        const BarChart3 = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
            </svg>
        );
        
        const Clock = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );
        
        const TrendingUp = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
            </svg>
        );
        
        const Search = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
        );

        const TaskTracker = () => {
            const initialTasks = [
                { id: 1, task: "Wiped down kitchen sink", date: "2025-07-30", duration: "", notes: "" },
                { id: 2, task: "Cleaned washroom sink", date: "2025-08-01", duration: "", notes: "" },
                { id: 3, task: "Cleaned toilet", date: "2025-08-01", duration: "", notes: "" },
                { id: 4, task: "Cleaned washroom sink", date: "2025-08-09", duration: "", notes: "" },
                { id: 5, task: "Cleaned toilet", date: "2025-08-09", duration: "", notes: "" },
                { id: 6, task: "Cleaned shoes in front of door", date: "2025-08-09", duration: "", notes: "" },
                { id: 7, task: "Cleaned bathtub", date: "2025-08-09", duration: "", notes: "" },
                { id: 8, task: "Painted toe nails", date: "2025-08-03", duration: "", notes: "" },
                { id: 9, task: "Folded almost all laundry", date: "2025-08-09", duration: "", notes: "" },
                { id: 10, task: "Swept front room/dining", date: "2025-08-10", duration: "", notes: "" },
                { id: 11, task: "Sorted laundry into shades", date: "2025-08-17", duration: "", notes: "" },
                { id: 12, task: "Cleaned kitchen sink", date: "2025-08-17", duration: "", notes: "" },
                { id: 13, task: "Hung up and put away clean clothes I tried on but didn't wear", date: "2025-08-17", duration: "", notes: "" },
                { id: 14, task: "Put away purses I tried on but didn't wear", date: "2025-08-17", duration: "", notes: "" },
                { id: 15, task: "Tidied up foyer", date: "2025-08-17", duration: "", notes: "" },
                { id: 16, task: "Stacked shoes in front entry way", date: "2025-08-17", duration: "", notes: "" },
                { id: 17, task: "Tidied office desk surface", date: "2025-08-17", duration: "", notes: "" },
                { id: 18, task: "Cleaned all clutter off white couch", date: "2025-08-17", duration: "", notes: "" },
                { id: 19, task: "Cleaned all clutter off wardrobe chair", date: "2025-08-17", duration: "", notes: "" },
                { id: 20, task: "Kitchen counter and floor should be cleaned", date: "2025-08-15", duration: "", notes: "Identified need - not yet completed" },
                { id: 21, task: "Shaved Mirek", date: "2025-08-10", duration: "", notes: "" },
                { id: 22, task: "Identified Mirek needs to be shaved", date: "2025-08-16", duration: "", notes: "Identified need - not yet completed" },
                { id: 23, task: "Shaved Mirek", date: "2025-08-04", duration: "", notes: "" },
                { id: 24, task: "Showered Mirek", date: "2025-08-04", duration: "", notes: "" },
                { id: 25, task: "Painted nails", date: "2025-07-29", duration: "", notes: "" },
                { id: 26, task: "Painted nails", date: "2025-08-11", duration: "", notes: "" },
                { id: 27, task: "Showered Mirek", date: "2025-07-12", duration: "", notes: "" },
                { id: 28, task: "Washed Mirek Hair", date: "2025-07-12", duration: "", notes: "" },
                { id: 29, task: "Did Mirek's Nails", date: "2025-07-13", duration: "", notes: "" },
                { id: 30, task: "Shaved Mirek", date: "2025-07-09", duration: "", notes: "" },
                { id: 31, task: "Shaved Mirek", date: "2025-07-22", duration: "", notes: "" }
            ];

            const [tasks, setTasks] = React.useState(() => {
                try {
                    const saved = localStorage.getItem('taskTrackerTasks');
                    return saved ? JSON.parse(saved) : initialTasks;
                } catch (e) {
                    return initialTasks;
                }
            });
            
            const [currentView, setCurrentView] = React.useState('calendar');
            const [selectedMonth, setSelectedMonth] = React.useState(new Date(2025, 7, 1));
            const [showAddForm, setShowAddForm] = React.useState(false);
            const [searchTerm, setSearchTerm] = React.useState('');
            
            const [newTask, setNewTask] = React.useState({
                task: '',
                date: new Date().toISOString().split('T')[0],
                duration: '',
                notes: ''
            });

            React.useEffect(() => {
                try {
                    localStorage.setItem('taskTrackerTasks', JSON.stringify(tasks));
                } catch (e) {
                    console.log('localStorage not available');
                }
            }, [tasks]);

            const addTask = () => {
                if (newTask.task && newTask.date) {
                    const task = { id: Date.now(), ...newTask };
                    setTasks([...tasks, task]);
                    setNewTask({
                        task: '', date: new Date().toISOString().split('T')[0], duration: '', notes: ''
                    });
                    setShowAddForm(false);
                }
            };

            const getTasksForDate = (date) => {
                const dateStr = date.toISOString().split('T')[0];
                return tasks.filter(task => task.date === dateStr);
            };

            const getDaysInMonth = (date) => new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();
            const getFirstDayOfMonth = (date) => new Date(date.getFullYear(), date.getMonth(), 1).getDay();
            const formatDate = (date) => date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });

            const calculateFrequencyAnalysis = () => {
                const taskGroups = {};
                tasks.forEach(task => {
                    const taskName = task.task.toLowerCase();
                    if (!taskGroups[taskName]) taskGroups[taskName] = [];
                    taskGroups[taskName].push(new Date(task.date));
                });

                return Object.entries(taskGroups).map(([taskName, dates]) => {
                    dates.sort((a, b) => a - b);
                    if (dates.length < 2) {
                        return {
                            task: taskName, occurrences: dates.length, averageDays: null,
                            suggestedCadence: 'Need more data', lastDone: dates[0],
                            daysSinceLastDone: Math.floor((new Date() - dates[0]) / (1000 * 60 * 60 * 24))
                        };
                    }
                    let totalDays = 0;
                    for (let i = 1; i < dates.length; i++) {
                        totalDays += Math.floor((dates[i] - dates[i-1]) / (1000 * 60 * 60 * 24));
                    }
                    const averageDays = Math.round(totalDays / (dates.length - 1));
                    let suggestedCadence = '';
                    if (averageDays <= 7) suggestedCadence = 'Weekly';
                    else if (averageDays <= 14) suggestedCadence = 'Bi-weekly';
                    else if (averageDays <= 35) suggestedCadence = 'Monthly';
                    else if (averageDays <= 70) suggestedCadence = 'Bi-monthly';
                    else if (averageDays <= 120) suggestedCadence = 'Quarterly';
                    else if (averageDays <= 200) suggestedCadence = 'Every 6 months';
                    else suggestedCadence = 'Yearly';

                    return {
                        task: taskName, occurrences: dates.length, averageDays, suggestedCadence,
                        lastDone: dates[dates.length - 1],
                        daysSinceLastDone: Math.floor((new Date() - dates[dates.length - 1]) / (1000 * 60 * 60 * 24))
                    };
                }).sort((a, b) => b.occurrences - a.occurrences);
            };

            const renderCalendar = () => {
                const daysInMonth = getDaysInMonth(selectedMonth);
                const firstDay = getFirstDayOfMonth(selectedMonth);
                const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                const calendarDays = [];
                
                for (let i = 0; i < firstDay; i++) {
                    calendarDays.push(React.createElement('div', { key: `empty-${i}`, className: "p-2 h-24 border border-gray-200" }));
                }
                
                for (let day = 1; day <= daysInMonth; day++) {
                    const currentDate = new Date(selectedMonth.getFullYear(), selectedMonth.getMonth(), day);
                    const dayTasks = getTasksForDate(currentDate);
                    
                    calendarDays.push(
                        React.createElement('div', { key: day, className: "p-1 h-24 border border-gray-200 bg-white hover:bg-gray-50 overflow-y-auto" },
                            React.createElement('div', { className: "font-semibold text-sm mb-1" }, day),
                            ...dayTasks.map(task => 
                                React.createElement('div', { 
                                    key: task.id, 
                                    className: "text-xs bg-blue-100 rounded px-1 py-0.5 mb-1 truncate",
                                    title: task.task 
                                }, task.task.length > 20 ? task.task.substring(0, 20) + '...' : task.task)
                            )
                        )
                    );
                }

                return React.createElement('div', { className: "bg-white rounded-lg shadow p-4" },
                    React.createElement('div', { className: "flex justify-between items-center mb-4" },
                        React.createElement('h2', { className: "text-xl font-bold" }, formatDate(selectedMonth)),
                        React.createElement('div', { className: "flex gap-2" },
                            React.createElement('button', {
                                onClick: () => setSelectedMonth(new Date(selectedMonth.getFullYear(), selectedMonth.getMonth() - 1, 1)),
                                className: "px-3 py-1 bg-gray-200 rounded hover:bg-gray-300"
                            }, '←'),
                            React.createElement('button', {
                                onClick: () => setSelectedMonth(new Date(selectedMonth.getFullYear(), selectedMonth.getMonth() + 1, 1)),
                                className: "px-3 py-1 bg-gray-200 rounded hover:bg-gray-300"
                            }, '→')
                        )
                    ),
                    React.createElement('div', { className: "grid grid-cols-7 gap-0 mb-2" },
                        ...days.map(day => 
                            React.createElement('div', { 
                                key: day, 
                                className: "p-2 font-semibold text-center bg-gray-100 border border-gray-300" 
                            }, day)
                        )
                    ),
                    React.createElement('div', { className: "grid grid-cols-7 gap-0 border border-gray-300" },
                        ...calendarDays
                    )
                );
            };

            const renderAnalysis = () => {
                const analysis = calculateFrequencyAnalysis();
                const filteredAnalysis = searchTerm ? analysis.filter(item => item.task.toLowerCase().includes(searchTerm.toLowerCase())) : analysis;

                return React.createElement('div', { className: "bg-white rounded-lg shadow p-4" },
                    React.createElement('div', { className: "flex justify-between items-center mb-4" },
                        React.createElement('h2', { className: "text-xl font-bold" }, 'Task Frequency Analysis'),
                        React.createElement('div', { className: "flex items-center gap-2" },
                            React.createElement(Search, { className: "w-4 h-4" }),
                            React.createElement('input', {
                                type: "text",
                                placeholder: "Search tasks...",
                                className: "border rounded px-2 py-1",
                                value: searchTerm,
                                onChange: (e) => setSearchTerm(e.target.value)
                            })
                        )
                    ),
                    React.createElement('div', { className: "grid gap-4" },
                        ...filteredAnalysis.map((item, index) =>
                            React.createElement('div', { key: index, className: "border rounded p-4 hover:bg-gray-50" },
                                React.createElement('div', { className: "flex justify-between items-start mb-2" },
                                    React.createElement('h3', { className: "font-semibold capitalize text-lg" }, item.task),
                                    React.createElement('span', { className: "bg-blue-100 px-2 py-1 rounded text-sm" },
                                        `${item.occurrences} times`
                                    )
                                ),
                                React.createElement('div', { className: "grid grid-cols-2 md:grid-cols-4 gap-4 text-sm" },
                                    React.createElement('div', {},
                                        React.createElement('span', { className: "text-gray-600" }, 'Average Frequency:'),
                                        React.createElement('div', { className: "font-semibold" },
                                            item.averageDays ? `${item.averageDays} days` : 'N/A'
                                        )
                                    ),
                                    React.createElement('div', {},
                                        React.createElement('span', { className: "text-gray-600" }, 'Suggested Cadence:'),
                                        React.createElement('div', { className: "font-semibold text-green-600" }, item.suggestedCadence)
                                    ),
                                    React.createElement('div', {},
                                        React.createElement('span', { className: "text-gray-600" }, 'Last Done:'),
                                        React.createElement('div', { className: "font-semibold" },
                                            item.lastDone.toLocaleDateString()
                                        )
                                    ),
                                    React.createElement('div', {},
                                        React.createElement('span', { className: "text-gray-600" }, 'Days Since:'),
                                        React.createElement('div', { 
                                            className: `font-semibold ${item.daysSinceLastDone > (item.averageDays || 30) ? 'text-red-600' : 'text-green-600'}` 
                                        }, `${item.daysSinceLastDone} days`)
                                    )
                                )
                            )
                        )
                    )
                );
            };

            return React.createElement('div', { className: "min-h-screen bg-gray-100 p-4" },
                React.createElement('div', { className: "max-w-6xl mx-auto" },
                    React.createElement('div', { className: "bg-white rounded-lg shadow p-4 mb-4" },
                        React.createElement('div', { className: "flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4" },
                            React.createElement('h1', { className: "text-2xl font-bold text-gray-800" }, 'Task Frequency Tracker'),
                            React.createElement('div', { className: "flex flex-wrap gap-2" },
                                React.createElement('button', {
                                    onClick: () => setCurrentView('calendar'),
                                    className: `flex items-center gap-2 px-4 py-2 rounded ${currentView === 'calendar' ? 'bg-blue-500 text-white' : 'bg-gray-200 hover:bg-gray-300'}`
                                },
                                    React.createElement(Calendar, { className: "w-4 h-4" }),
                                    'Calendar'
                                ),
                                React.createElement('button', {
                                    onClick: () => setCurrentView('analysis'),
                                    className: `flex items-center gap-2 px-4 py-2 rounded ${currentView === 'analysis' ? 'bg-blue-500 text-white' : 'bg-gray-200 hover:bg-gray-300'}`
                                },
                                    React.createElement(BarChart3, { className: "w-4 h-4" }),
                                    'Analysis'
                                ),
                                React.createElement('button', {
                                    onClick: () => setShowAddForm(true),
                                    className: "flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"
                                },
                                    React.createElement(Plus, { className: "w-4 h-4" }),
                                    'Add Task'
                                )
                            )
                        )
                    ),

                    React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4" },
                        React.createElement('div', { className: "bg-white rounded-lg shadow p-4" },
                            React.createElement('div', { className: "flex items-center gap-3" },
                                React.createElement(Clock, { className: "w-8 h-8 text-blue-500" }),
                                React.createElement('div', {},
                                    React.createElement('div', { className: "text-2xl font-bold" }, tasks.length),
                                    React.createElement('div', { className: "text-gray-600 text-sm" }, 'Total Tasks Logged')
                                )
                            )
                        ),
                        React.createElement('div', { className: "bg-white rounded-lg shadow p-4" },
                            React.createElement('div', { className: "flex items-center gap-3" },
                                React.createElement(TrendingUp, { className: "w-8 h-8 text-green-500" }),
                                React.createElement('div', {},
                                    React.createElement('div', { className: "text-2xl font-bold" }, calculateFrequencyAnalysis().length),
                                    React.createElement('div', { className: "text-gray-600 text-sm" }, 'Unique Task Types')
                                )
                            )
                        ),
                        React.createElement('div', { className: "bg-white rounded-lg shadow p-4" },
                            React.createElement('div', { className: "flex items-center gap-3" },
                                React.createElement(Calendar, { className: "w-8 h-8 text-purple-500" }),
                                React.createElement('div', {},
                                    React.createElement('div', { className: "text-2xl font-bold" },
                                        tasks.filter(t => t.date === new Date().toISOString().split('T')[0]).length
                                    ),
                                    React.createElement('div', { className: "text-gray-600 text-sm" }, 'Tasks Today')
                                )
                            )
                        )
                    ),

                    currentView === 'calendar' && renderCalendar(),
                    currentView === 'analysis' && renderAnalysis(),
                    
                    showAddForm && React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" },
                        React.createElement('div', { className: "bg-white rounded-lg p-6 w-full max-w-md mx-4" },
                            React.createElement('h3', { className: "text-lg font-bold mb-4" }, 'Add New Task'),
                            React.createElement('div', { className: "space-y-4" },
                                React.createElement('div', {},
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, 'Task Description'),
                                    React.createElement('input', {
                                        type: "text",
                                        className: "w-full border rounded px-3 py-2",
                                        value: newTask.task,
                                        onChange: (e) => setNewTask({...newTask, task: e.target.value}),
                                        placeholder: "e.g., Cleaned kitchen sink"
                                    })
                                ),
                                React.createElement('div', {},
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, 'Date'),
                                    React.createElement('input', {
                                        type: "date",
                                        className: "w-full border rounded px-3 py-2",
                                        value: newTask.date,
                                        onChange: (e) => setNewTask({...newTask, date: e.target.value})
                                    })
                                ),
                                React.createElement('div', {},
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, 'Duration (optional)'),
                                    React.createElement('input', {
                                        type: "text",
                                        className: "w-full border rounded px-3 py-2",
                                        value: newTask.duration,
                                        onChange: (e) => setNewTask({...newTask, duration: e.target.value}),
                                        placeholder: "e.g., 15 minutes"
                                    })
                                ),
                                React.createElement('div', {},
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, 'Notes (optional)'),
                                    React.createElement('textarea', {
                                        className: "w-full border rounded px-3 py-2 h-20",
                                        value: newTask.notes,
                                        onChange: (e) => setNewTask({...newTask, notes: e.target.value}),
                                        placeholder: "Any additional notes..."
                                    })
                                )
                            ),
                            React.createElement('div', { className: "flex gap-2 mt-6" },
                                React.createElement('button', {
                                    onClick: addTask,
                                    className: "flex-1 bg-blue-500 text-white rounded py-2 hover:bg-blue-600"
                                }, 'Add Task'),
                                React.createElement('button', {
                                    onClick: () => setShowAddForm(false),
                                    className: "flex-1 bg-gray-300 text-gray-700 rounded py-2 hover:bg-gray-400"
                                }, 'Cancel')
                            )
                        )
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(TaskTracker), document.getElementById('root'));
    </script>
</body>
</html>